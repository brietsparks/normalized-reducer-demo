(this["webpackJsonpnormalized-reducer-demo"]=this["webpackJsonpnormalized-reducer-demo"]||[]).push([[0],{105:function(e,t,a){e.exports=a(118)},115:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(12),c=a.n(l),r=a(169),o=a(170),m=a(97),d=Object(m.a)({overrides:{MuiLink:{root:{cursor:"pointer"}},MuiInputBase:{input:{background:"#fff"},multiline:{background:"#fff"}}},props:{MuiButtonBase:{disableRipple:!0},MuiDialog:{transitionDuration:0},MuiPopover:{PaperProps:{square:!0}},MuiTooltip:{enterDelay:1200,arrow:!0},MuiIconButton:{size:"small"},MuiIcon:{fontSize:"small"},MuiButton:{disableElevation:!0,variant:"contained",disableRipple:!0},MuiTextField:{variant:"outlined",margin:"dense",InputLabelProps:{shrink:!0}},MuiFormControl:{variant:"outlined",margin:"dense"}}}),s=a(17),u=a(41),E=a(7),p=a(171),f=a(69),h=a.n(f),b=a(161),y=a(162),v=a(157),I=a(57),g=a(6),O=a(155),j=a(85),x=a.n(j);var S=function(e){var t=e.state,a=e.name,n=void 0===a?"state":a,l=e.level,c=void 0===l?5:l,r=e.fullHeight,o=void 0===r||r;return i.a.createElement(x.a,{style:{paddingTop:15,paddingLeft:15,minHeight:o?"100vh":void 0},src:t,name:n,theme:"monokai",collapsed:c,displayObjectSize:!1,enableClipboard:!1,displayDataTypes:!1})},k=a(153),C=Object(k.a)((function(e){return{scrollable:{height:"100vh",overflowY:"scroll"}}}));function N(e){var t=e.sidebar,a=void 0===t?i.a.createElement(_n,null):t,n=e.main,l=void 0===n?null:n,c=e.state,r=e.stateName,o=C();return i.a.createElement(O.a,{container:!0},i.a.createElement(O.a,{item:!0,xs:12,sm:2},i.a.createElement("div",{className:o.scrollable},a)),i.a.createElement(O.a,{item:!0,xs:12,sm:6},i.a.createElement(v.a,{className:o.scrollable},l)),i.a.createElement(O.a,{item:!0,xs:12,sm:4},i.a.createElement("div",{className:o.scrollable},i.a.createElement(S,{state:c,name:r}))))}var w=a(159),D=a(158),A=Object(k.a)((function(e){return{left:{display:"flex",justifyContent:"flex-end"},cardWrapper:function(t){return{padding:e.spacing(1),cursor:L(t),border:"solid",borderColor:T(t),"&:hover":{borderColor:z(t)}}},cardBody:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},cardContainer:{marginBottom:e.spacing(2)}}})),T=function(e){var t;return e.isSelected||(t="#fff"),e.isSelected&&(t=D.a[500]),t},z=function(e){return e.isSelectable?e.isSelected?D.a[500]:D.a[100]:"#fff"},L=function(e){return e.isSelectable?e.isSelected?void 0:"pointer":"inherit"};function R(e){var t=e.body,a=e.left,n=e.right,l=e.isLeftShown,c=void 0===l||l,r=e.isRightShown,o=void 0===r||r,m=e.isSelectable,d=e.isSelected,s=e.onSelect,u=(e.onDeselect,A({isSelectable:m,isSelected:d}));return i.a.createElement(O.a,{container:!0},a&&i.a.createElement(O.a,{item:!0,xs:2,className:u.left},i.a.createElement("div",null,c&&a)),i.a.createElement(O.a,{item:!0,xs:a||n?a&&n?8:10:12,className:u.cardBody},i.a.createElement(w.a,{className:u.cardWrapper,onClick:function(){m&&!d&&s&&s()}},"string"===typeof t?i.a.createElement(I.a,null,t):t)),n&&i.a.createElement(O.a,{item:!0,xs:2},i.a.createElement("div",null,o&&n)))}function M(e){var t=e.children,a=A();return i.a.createElement("div",null,i.a.Children.map(t,(function(e,t){return i.a.createElement("div",{className:a.cardContainer},e)})))}var B=a(98),F=a(86),P=a.n(F),Y=Object(k.a)((function(e){return{section:{marginBottom:e.spacing(2)},label:{fontWeight:"bold"},docsIcon:{position:"relative",top:2,height:".7em"},preformat:{margin:0,background:"#f4f4f4",border:"1px solid #ddd",borderLeft:"3px solid #f36d33",color:"#666",pageBreakInside:"avoid",fontFamily:"monospace",fontSize:15,lineHeight:1.6,maxWidth:"100%",overflow:"auto",padding:"1em 1.5em",display:"block",wordWrap:"break-word"}}})),W=function(e){var t=Y();return i.a.createElement(I.a,Object.assign({className:t.label},e))};function H(e){var t=e.title,a=e.summary,n=void 0===a?"":a,l=Y();return i.a.createElement("div",null,i.a.createElement(I.a,{variant:"h5",component:"h2"},t),i.a.createElement("div",{className:l.section},i.a.createElement(I.a,null,n)))}function J(e){var t=e.children,a=Y();return i.a.createElement("pre",{className:a.preformat},i.a.createElement("code",null,Array.isArray(t)?t.join("\n"):t))}function U(e){var t=e.elemId,a=e.text,n=e.url,l=Object(B.a)(e,["elemId","text","url"]),c=Y();if(!t&&!n)throw new Error("ExternalLink expects either an elemId or url");var r=n||"".concat("https://github.com/brietsparks/normalized-reducer","#").concat(t);return i.a.createElement("a",Object.assign({href:r,target:"_blank",rel:"noopener noreferrer"},l),a,i.a.createElement(P.a,{className:c.docsIcon}))}function K(e){var t=e.action,a=e.docElemId,n=e.example,l=Y();return i.a.createElement("div",null,i.a.createElement("div",{className:l.section},i.a.createElement(I.a,null,i.a.createElement("span",{className:l.label},"Action: "),i.a.createElement(U,{elemId:a,text:t}))),i.a.createElement("div",{className:l.section},i.a.createElement(W,null,"Example:"),i.a.createElement(J,null,n)))}function _(e){var t=e.title,a=e.summary,n=e.action,l=e.docElemId,c=e.example;return i.a.createElement("div",null,i.a.createElement(H,{title:t,summary:a}),i.a.createElement(K,{action:n,docElemId:l,example:c}))}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=Math.floor(Math.pow(10,e-1)+Math.random()*(Math.pow(10,e)-Math.pow(10,e-1)-1));return t.toString()}var $=Object(k.a)((function(e){return{form:{display:"flex",marginBottom:e.spacing(2)},formItemName:{marginRight:e.spacing(1)},formHint:{marginTop:e.spacing(2.25),marginLeft:e.spacing(1),fontStyle:"italic",color:"#888"}}}));function G(e,t){return function(a){"Enter"===a.key&&(null===t||void 0===t?void 0:t.current)===document.activeElement&&e()}}var Q=Object(g.b)({item:{}}),V=Q.reducer,X=Q.emptyState,Z=Q.actionCreators,ee=Q.selectors;function te(e){var t=e.onSubmit,a=Object(n.useState)(""),l=Object(E.a)(a,2),c=l[0],r=l[1],o=c.trim(),m=Object(n.useRef)(),d=function(){o&&(t(o),r(""),m.current.focus())},s={onKeyPress:G(d,m),ref:m},u=$();return i.a.createElement("div",{className:u.form},i.a.createElement(p.a,{autoFocus:!0,inputProps:s,placeholder:"Item name:",value:c,onChange:function(e){return r(e.target.value)},InputProps:{endAdornment:i.a.createElement(b.a,{position:"end"},i.a.createElement(y.a,{onClick:d,color:"primary",disabled:!o},i.a.createElement(h.a,null)))}}),!!o&&i.a.createElement(I.a,{className:u.formHint,variant:"caption"},"press enter"))}var ae=Object(g.b)({item:{}}),ne=ae.reducer,ie=ae.actionCreators,le=ae.selectors,ce={entities:{item:{i1:{name:"Lorem"},i2:{name:"Ispum"},i3:{name:"Dolor"},i4:{name:"Sit Amet"}}},ids:{item:["i1","i2","i3","i4"]}};function re(e){var t=e.onSubmit,a=Object(n.useState)(2),l=Object(E.a)(a,2),c=l[0],r=l[1],o=Object(n.useState)(""),m=Object(E.a)(o,2),d=m[0],s=m[1],u=d.trim(),f=$(),b=Object(n.useRef)(),v=Object(n.useRef)(),I=function(){u&&(t(u,c),s(""),b.current.focus())},g=G(I,b),O=G(I,v),j={onKeyPress:g,ref:b},x={onKeyPress:O,ref:v};return i.a.createElement("div",{className:f.form},i.a.createElement(p.a,{autoFocus:!0,className:f.formItemName,inputProps:j,placeholder:"Item name:",value:d,onChange:function(e){return s(e.target.value)}}),i.a.createElement(p.a,{inputProps:x,placeholder:"Index:",value:c,onChange:function(e){return e&&r(Number(e.target.value))},type:"number"}),i.a.createElement(y.a,{onClick:I,color:"primary",disabled:!u},i.a.createElement(h.a,null)))}var oe=function(){var e=Object(n.useReducer)(V,X),t=Object(E.a)(e,2),a=t[0],l=t[1],c=ee.getIds(a,{type:"item"}),r=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Create",summary:"Add an entity to state.",action:"create",docElemId:"create",example:"actionCreators.create('item', id, { fieldA: 'arbitrary' , fieldB: 'anything' })"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Add some items. Each entity will get added to the ",i.a.createElement("code",null,"state.entities.item")," object, and its id will be appended on the ",i.a.createElement("code",null,"state.ids.item")," array."),i.a.createElement(te,{onSubmit:function(e){var t=q();l(Z.create("item",t,{name:e}))}}),i.a.createElement(M,null,c.map((function(e){var t=ee.getEntity(a,{type:"item",id:e});return i.a.createElement(R,{key:e,body:null===t||void 0===t?void 0:t.name,isSelectable:!1})}))));return i.a.createElement(N,{main:r,state:a})},me=function(){var e=Object(n.useReducer)(ne,ce),t=Object(E.a)(e,2),a=t[0],l=t[1],c=le.getIds(a,{type:"item"}),r=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Create, indexed",summary:"Add an entity to a collection at a given index.",action:"create",docElemId:"create",example:"actionCreators.create('item', id, { a: 'foo' }, 2)"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Add some items. Each entity will get added to the ",i.a.createElement("code",null,"state.entities.item")," object, and its id will be inserted at the appropriate index in the ",i.a.createElement("code",null,"state.ids.item")," array."),i.a.createElement(re,{onSubmit:function(e,t){var a=q();l(ie.create("item",a,{name:e},t))}}),i.a.createElement(M,null,c.map((function(e){var t=le.getEntity(a,{type:"item",id:e});return i.a.createElement(R,{key:e,body:null===t||void 0===t?void 0:t.name,isSelectable:!1})}))));return i.a.createElement(N,{main:r,state:a})},de=a(163),se=a(55),ue=a(172),Ee=Object(k.a)((function(e){return{cardId:function(t){return{color:t.isAttachedToSelected?e.palette.secondary.main:void 0}},cardAttached:function(t){return{marginTop:e.spacing(2),color:t.isSelected?e.palette.secondary.main:void 0}},cardAttachedIds:function(t){return{marginTop:0,color:t.isSelected?e.palette.secondary.main:void 0}}}}));function pe(e){var t,a=e.id,n=e.text,l=e.isSelected,c=e.attached,r=e.selectedRelatedId,o=e.select,m=e.deselect,d=e.attach,s=e.detach,u=e.checkboxSide,E=!1;r&&("string"===typeof c&&(E=r===c),Array.isArray(c)&&(E=Boolean(r&&(null===c||void 0===c?void 0:c.includes(r)))));var p=(t={},Object(se.a)(t,u,i.a.createElement(ue.a,{checked:E,onChange:function(e,t){r&&(t?d(a,r):s(a,r))}})),Object(se.a)(t,"left"===u?"isLeftShown":"isRightShown",!!r),t);return i.a.createElement(R,Object.assign({key:a,body:i.a.createElement(fe,{id:a,text:n,ids:c,isSelected:l,isAttachedToSelected:E}),onSelect:function(){return o(a)},onDeselect:m,isSelectable:!0,isSelected:l},p))}function fe(e){var t=e.id,a=e.text,n=e.ids,l=e.isSelected,c=e.isAttachedToSelected,r=Ee({isSelected:l,isAttachedToSelected:c});return i.a.createElement("div",null,i.a.createElement(I.a,{variant:"caption",className:r.cardId},t),i.a.createElement(I.a,null,a),i.a.createElement("div",{className:r.cardAttached},i.a.createElement(I.a,{variant:"caption"},"Attached Ids:"),i.a.createElement("pre",{className:r.cardAttachedIds},n?JSON.stringify(n):" ")))}var he={item:{tagIds:{type:"tag",cardinality:g.a.MANY,reciprocal:"itemIds"}},tag:{itemIds:{type:"item",cardinality:g.a.MANY,reciprocal:"tagIds"}}},be=Object(g.b)(he),ye=be.selectors,ve=be.reducer,Ie=be.actionCreators,ge={entities:{item:{i1:{name:"Item 1",tagIds:["t2","t3"]},i2:{name:"Item 2",tagIds:[]},i3:{name:"Item 3",tagIds:[]}},tag:{t1:{title:"Tag 1",itemIds:[]},t2:{title:"Tag 2",itemIds:["i1"]},t3:{title:"Tag 3",itemIds:["i1"]}}},ids:{item:["i1","i2","i3"],tag:["t1","t2","t3"]}};var Oe={account:{profileId:{type:"profile",cardinality:g.a.ONE,reciprocal:"accountId"}},profile:{accountId:{type:"account",cardinality:g.a.ONE,reciprocal:"profileId"}}},je=Object(g.b)(Oe),xe=je.selectors,Se=je.reducer,ke=je.actionCreators,Ce={entities:{account:{a1:{email:"account1@example.com",profileId:"u2"},a2:{email:"account2@example.com",profileId:"u3"},a3:{email:"account3@example.com",profileId:void 0}},profile:{u1:{name:"Profile 1",accountId:void 0},u2:{name:"Profile 2",accountId:"a1"},u3:{name:"Profile 3",accountId:"a2"}}},ids:{account:["a1","a2","a3"],profile:["u1","u2","u3"]}};var Ne={item:{listId:{type:"list",cardinality:g.a.ONE,reciprocal:"itemIds"}},list:{itemIds:{type:"item",cardinality:g.a.MANY,reciprocal:"listId"}}},we=Object(g.b)(Ne),De=we.selectors,Ae=we.reducer,Te=we.actionCreators,ze={entities:{item:{i1:{name:"Item 1",listId:"l1"},i2:{name:"Item 2",listId:"l1"},i3:{name:"Item 3",listId:"l3"}},list:{l1:{title:"List 1",itemIds:["i1","i2"]},l2:{title:"List 2",itemIds:[]},l3:{title:"List 3",itemIds:["i3"]}}},ids:{item:["i1","i2","i3"],list:["l1","l2","l3"]}};var Le=function(){var e=Object(n.useReducer)(ve,ge),t=Object(E.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(void 0),r=Object(E.a)(c,2),o=r[0],m=r[1],d=Object(n.useState)(void 0),s=Object(E.a)(d,2),u=s[0],p=s[1],f=function(){return m(void 0)},h=function(){return p(void 0)},b=function(e){m(e),h()},y=function(e){p(e),f()},v=ye.getIds(a,{type:"item"}),g=ye.getIds(a,{type:"tag"}),j=function(e){l(Ie.attach("item",e.itemId,"tagIds",e.tagId))},x=function(e){l(Ie.detach("item",e.itemId,"tagIds",e.tagId))},S=i.a.createElement("div",null,i.a.createElement(H,{title:"Attach/detach many-to-many",summary:"Attach and detach entities of a many-to-many relationship"}),i.a.createElement(K,{action:"attach",docElemId:"attach",example:"actionCreators.attach('item', 'i1', 'tagIds', 't1')"}),i.a.createElement(K,{action:"detach",docElemId:"detach",example:"actionCreators.detach('item', 'i1', 'tagIds', 't1')"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Click on a box. Then click the checkboxes in the opposite column to attach/detach it. Attaching and detaching will change both entities in ",i.a.createElement("code",null,"state.entities"),"."),i.a.createElement(de.a,{onClickAway:function(){f(),h()}},i.a.createElement(O.a,{container:!0},i.a.createElement(O.a,{item:!0,sm:6},i.a.createElement(M,null,v.map((function(e){var t=ye.getEntity(a,{type:"item",id:e});return t?i.a.createElement(pe,{key:e,id:e,text:t.name,isSelected:e===o,attached:t.tagIds,selectedRelatedId:u,select:b,deselect:f,attach:function(e,t){return j({itemId:e,tagId:t})},detach:function(e,t){return x({itemId:e,tagId:t})},checkboxSide:"right"}):null})))),i.a.createElement(O.a,{item:!0,sm:6},i.a.createElement(M,null,g.map((function(e){var t=ye.getEntity(a,{type:"tag",id:e});return t?i.a.createElement(pe,{key:e,id:e,text:t.title,isSelected:e===u,attached:t.itemIds,selectedRelatedId:o,select:y,deselect:h,attach:function(e,t){return j({tagId:e,itemId:t})},detach:function(e,t){return x({tagId:e,itemId:t})},checkboxSide:"left"}):null})))))));return i.a.createElement(N,{main:S,state:a})},Re=function(){var e=Object(n.useReducer)(Se,Ce),t=Object(E.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(void 0),r=Object(E.a)(c,2),o=r[0],m=r[1],d=Object(n.useState)(void 0),s=Object(E.a)(d,2),u=s[0],p=s[1],f=function(){return m(void 0)},h=function(){return p(void 0)},b=function(e){m(e),h()},y=function(e){p(e),f()},v=xe.getIds(a,{type:"account"}),g=xe.getIds(a,{type:"profile"}),j=function(e){l(ke.attach("account",e.accountId,"profileId",e.profileId))},x=function(e){l(ke.detach("account",e.accountId,"profileId",e.profileId))},S=i.a.createElement("div",null,i.a.createElement(H,{title:"Attach/detach one-to-one",summary:"Attach and detach entities of a one-to-many relationship"}),i.a.createElement(K,{action:"attach",docElemId:"attach",example:"actionCreators.attach('account', 'a1', 'profileId', 'p1')"}),i.a.createElement(K,{action:"detach",docElemId:"detach",example:"actionCreators.detach('account', 'a1', 'profileId', 'p1')"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Click on a box. Then click the checkboxes in the opposite column to attach/detach it. Attaching and detaching will change both entities in ",i.a.createElement("code",null,"state.entities"),". Notice that at any given time, a profile can only have one account and vice versa."),i.a.createElement(de.a,{onClickAway:function(){f(),h()}},i.a.createElement(O.a,{container:!0},i.a.createElement(O.a,{item:!0,sm:6},i.a.createElement(M,null,v.map((function(e){var t=xe.getEntity(a,{type:"account",id:e});return t?i.a.createElement(pe,{key:e,id:e,text:t.email,isSelected:e===o,attached:t.profileId,selectedRelatedId:u,select:b,deselect:f,attach:function(e,t){return j({accountId:e,profileId:t})},detach:function(e,t){return x({accountId:e,profileId:t})},checkboxSide:"right"}):null})))),i.a.createElement(O.a,{item:!0,sm:6},i.a.createElement(M,null,g.map((function(e){var t=xe.getEntity(a,{type:"profile",id:e});return t?i.a.createElement(pe,{key:e,id:e,text:t.name,isSelected:e===u,attached:t.accountId,selectedRelatedId:o,select:y,deselect:h,attach:function(e,t){return j({profileId:e,accountId:t})},detach:function(e,t){return x({profileId:e,accountId:t})},checkboxSide:"left"}):null})))))));return i.a.createElement(N,{main:S,state:a})},Me=function(){var e=Object(n.useReducer)(Ae,ze),t=Object(E.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(void 0),r=Object(E.a)(c,2),o=r[0],m=r[1],d=Object(n.useState)(void 0),s=Object(E.a)(d,2),u=s[0],p=s[1],f=function(){return m(void 0)},h=function(){return p(void 0)},b=function(e){m(e),h()},y=function(e){p(e),f()},v=De.getIds(a,{type:"item"}),g=De.getIds(a,{type:"list"}),j=function(e){l(Te.attach("item",e.itemId,"listId",e.listId))},x=function(e){l(Te.detach("item",e.itemId,"listId",e.listId))},S=i.a.createElement("div",null,i.a.createElement(H,{title:"Attach/detach one-to-many",summary:"Attach and detach entities of a one-to-many relationship"}),i.a.createElement(K,{action:"attach",docElemId:"attach",example:"actionCreators.attach('list', 'l1', 'itemIds', 'i1')"}),i.a.createElement(K,{action:"detach",docElemId:"detach",example:"actionCreators.detach('list', 'l1', 'itemIds', 'i1')"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Click on a box. Then click the checkboxes in the opposite column to attach/detach it. Attaching and detaching will change both entities in ",i.a.createElement("code",null,"state.entities"),". Notice that an item can only have one list at any given time."),i.a.createElement(de.a,{onClickAway:function(){f(),h()}},i.a.createElement(O.a,{container:!0},i.a.createElement(O.a,{item:!0,sm:6},i.a.createElement(M,null,g.map((function(e){var t=De.getEntity(a,{type:"list",id:e});return t?i.a.createElement(pe,{key:e,id:e,text:t.title,isSelected:e===u,attached:t.itemIds,selectedRelatedId:o,select:y,deselect:h,attach:function(e,t){return j({listId:e,itemId:t})},detach:function(e,t){return x({listId:e,itemId:t})},checkboxSide:"right"}):null})))),i.a.createElement(O.a,{item:!0,sm:6},i.a.createElement(M,null,v.map((function(e){var t=De.getEntity(a,{type:"item",id:e});return t?i.a.createElement(pe,{key:e,id:e,text:t.name,isSelected:e===o,attached:t.listId,selectedRelatedId:u,select:b,deselect:f,attach:function(e,t){return j({itemId:e,listId:t})},detach:function(e,t){return x({itemId:e,listId:t})},checkboxSide:"left"}):null})))))));return i.a.createElement(N,{main:S,state:a})},Be=Object(g.b)({item:{}}),Fe=Be.reducer,Pe=(Be.emptyState,Be.actionCreators),Ye=Be.selectors,We={entities:{item:{i1:{name:"Foo"},i2:{name:"Bar"},i3:{name:"Baz"}}},ids:{item:["i1","i2","i3"]}};function He(){var e=Object(n.useReducer)(Fe,We),t=Object(E.a)(e,2),a=t[0],l=t[1],c=Ye.getIds(a,{type:"item"}),r=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Update",summary:"Update an existing entity.",action:"update",docElemId:"update",example:"actionCreators.update('item', 'i1', { name: 'x' })"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Edit some items. Each entity will get updated in the ",i.a.createElement("code",null,"state.entities.item")," object."),i.a.createElement(M,null,c.map((function(e){var t=Ye.getEntity(a,{type:"item",id:e});return i.a.createElement(R,{key:e,isSelectable:!1,body:i.a.createElement(p.a,{value:null===t||void 0===t?void 0:t.name,onChange:function(t){l(Pe.update("item",e,{name:t.target.value}))},placeholder:"Item name:"})})}))));return i.a.createElement(N,{main:r,state:a})}var Je=a(38),Ue=a.n(Je),Ke=Object(g.b)({item:{}}),_e=Ke.reducer,qe=Ke.actionCreators,$e=Ke.selectors,Ge={entities:{item:{i1:{name:"Foo"},i2:{name:"Bar"},i3:{name:"Baz"}}},ids:{item:["i1","i2","i3"]}};var Qe=Object(k.a)((function(e){return{cardBody:{display:"flex",justifyContent:"space-between"},cardAttached:{marginTop:e.spacing(2)},cardAttachedIds:{marginTop:0}}}));function Ve(e){var t=e.id,a=e.text,n=e.attached,l=e.delete;return i.a.createElement(R,{key:t,isSelectable:!1,body:i.a.createElement(Xe,{id:t,text:a,ids:n,onClickDelete:function(){return l(t)}})})}function Xe(e){var t=e.id,a=e.text,n=e.ids,l=e.onClickDelete,c=Qe();return i.a.createElement("div",{className:c.cardBody},i.a.createElement("div",null,i.a.createElement(I.a,{variant:"caption"},t),i.a.createElement(I.a,null,a),i.a.createElement("div",{className:c.cardAttached},i.a.createElement(I.a,{variant:"caption"},"Attached Ids:"),i.a.createElement("pre",{className:c.cardAttachedIds},n?JSON.stringify(n):" "))),i.a.createElement("div",null,i.a.createElement(y.a,{onClick:l},i.a.createElement(Ue.a,null))))}var Ze={item:{tagIds:{type:"tag",cardinality:g.a.MANY,reciprocal:"itemIds"}},tag:{itemIds:{type:"item",cardinality:g.a.MANY,reciprocal:"tagIds"}}},et=Object(g.b)(Ze),tt=et.selectors,at=et.reducer,nt=et.actionCreators,it={entities:{item:{i1:{name:"Item 1",tagIds:["t2","t3"]},i2:{name:"Item 2",tagIds:["t1","t2","t3"]},i3:{name:"Item 3",tagIds:[]}},tag:{t1:{title:"Tag 1",itemIds:["i2"]},t2:{title:"Tag 2",itemIds:["i1","i2"]},t3:{title:"Tag 3",itemIds:["i1","i2"]}}},ids:{item:["i1","i2","i3"],tag:["t1","t2","t3"]}};var lt=function(){var e=Object(n.useReducer)(_e,Ge),t=Object(E.a)(e,2),a=t[0],l=t[1],c=$e.getIds(a,{type:"item"}),r=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Delete",summary:"Delete an entity",action:"delete",docElemId:"delete",example:"actionCreators.delete('item', 'i1')"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Delete some items. The item will be removed from the ",i.a.createElement("code",null,"state.entities.item")," object, and its id will be removed from the ",i.a.createElement("code",null,"state.ids.item")," array."),i.a.createElement(M,null,c.map((function(e){var t=$e.getEntity(a,{type:"item",id:e});return i.a.createElement(R,{key:e,isSelectable:!1,body:null===t||void 0===t?void 0:t.name,right:i.a.createElement(y.a,{onClick:function(){return l(qe.delete("item",e))}},i.a.createElement(Ue.a,null)),isRightShown:!0})}))));return i.a.createElement(N,{main:r,state:a})},ct=function(){var e=Object(n.useReducer)(at,it),t=Object(E.a)(e,2),a=t[0],l=t[1],c=tt.getIds(a,{type:"item"}),r=tt.getIds(a,{type:"tag"}),o=function(e){return l(nt.delete("item",e))},m=function(e){return l(nt.delete("tag",e))},d=i.a.createElement("div",null,i.a.createElement(_,{title:"Delete + detach",summary:"Delete an entity and automatically detach all entities from it",action:"delete",docElemId:"delete",example:"actionCreators.delete('item', 'i1')"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Delete some items and tags. Deleting one will cause its id to be removed from the entity it was attached to."),i.a.createElement(O.a,{container:!0},i.a.createElement(O.a,{item:!0,sm:6},i.a.createElement(M,null,c.map((function(e){var t=tt.getEntity(a,{type:"item",id:e});return i.a.createElement(Ve,{key:e,id:e,text:null===t||void 0===t?void 0:t.name,attached:null===t||void 0===t?void 0:t.tagIds,delete:o})})))),i.a.createElement(O.a,{item:!0,sm:6},i.a.createElement(M,null,r.map((function(e){var t=tt.getEntity(a,{type:"tag",id:e});return i.a.createElement(Ve,{key:e,id:e,text:null===t||void 0===t?void 0:t.title,attached:null===t||void 0===t?void 0:t.itemIds,delete:m})}))))));return i.a.createElement(N,{main:d,state:a})},rt=a(70),ot=a.n(rt),mt=a(71),dt=a.n(mt),st=a(28),ut=Object(k.a)((function(e){return{card:{marginBottom:e.spacing(2)},body:{display:"flex",justifyContent:"space-between"}}})),Et=Object(g.b)({item:{}}),pt=Et.reducer,ft=Et.actionCreators,ht=Et.selectors,bt={ids:{item:["i1","i2","i3"]},entities:{item:{i1:{name:"Foo"},i2:{name:"Bar"},i3:{name:"Baz"}}}},yt=st.b.div({flip:{transition:{duration:525}}});function vt(){var e=Object(n.useReducer)(pt,bt),t=Object(E.a)(e,2),a=t[0],l=t[1],c=ht.getIds(a,{type:"item"}),r=ut(),o=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Move",summary:"Change the ordinal position of an entity with respect to its top-level collection",action:"move",docElemId:"move",example:"actionCreators.move('item', 1, 3)"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Move some items around. The item's id will be moved to the new index in the ",i.a.createElement("code",null,"state.ids.item")," array."),i.a.createElement(st.a,null,c.map((function(e,t){var n=ht.getEntity(a,{type:"item",id:e});return i.a.createElement(yt,{key:e,index:t},i.a.createElement("div",{className:r.card},i.a.createElement(R,{isSelectable:!1,body:i.a.createElement("div",{className:r.body},i.a.createElement(I.a,null,null===n||void 0===n?void 0:n.name),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(y.a,{onClick:function(){return l(ft.move("item",t,t-1))}},i.a.createElement(ot.a,null))),i.a.createElement("div",null,i.a.createElement(y.a,{onClick:function(){return l(ft.move("item",t,t+1))}},i.a.createElement(dt.a,null)))))})))}))));return i.a.createElement(N,{main:o,state:{ids:a.ids,entities:a.entities}})}var It=Object(k.a)((function(){return{listTitle:{fontWeight:"bold"},item:{background:"#fff",borderTop:"solid 1px #ccc",display:"flex",justifyContent:"space-between"}}})),gt={item:{listId:{type:"list",cardinality:g.a.ONE,reciprocal:"itemIds"}},list:{itemIds:{type:"item",cardinality:g.a.MANY,reciprocal:"listId"}}},Ot=Object(g.b)(gt),jt=Ot.selectors,xt=Ot.reducer,St=Ot.actionCreators,kt={entities:{list:{l1:{title:"List 1",itemIds:["i1","i2","i3"]},l2:{title:"List 2",itemIds:["i4","i5","i6"]}},item:{i1:{name:"Item 1",listId:"l1"},i2:{name:"Item 2",listId:"l1"},i3:{name:"Item 3",listId:"l1"},i4:{name:"Item 4",listId:"l2"},i5:{name:"Item 5",listId:"l2"},i6:{name:"Item 6",listId:"l2"}}},ids:{item:["i1","i2","i3","i4","i5","i6"],list:["l1","l2"]}},Ct=st.b.div({flip:{transition:{duration:525}}});function Nt(){var e=Object(n.useReducer)(xt,kt),t=Object(E.a)(e,2),a=t[0],l=t[1],c=jt.getIds(a,{type:"list"}),r=It(),o=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Move attached",summary:"Change the ordinal position of an attached entity id",action:"moveAttached",docElemId:"moveAttached",example:"actionCreators.moveAttached('list', 'l1', 'itemIds', 2, 5)"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Move an item within a list. Inside the list's data in ",i.a.createElement("code",null,"state.entities.list"),", the item's id will be moved to the new index in ",i.a.createElement("code",null,"itemIds"),"."),i.a.createElement(M,null,c.map((function(e){var t=jt.getEntity(a,{type:"list",id:e}),n=i.a.createElement("div",null,i.a.createElement(I.a,{className:r.listTitle},null===t||void 0===t?void 0:t.title),i.a.createElement(st.a,null,null===t||void 0===t?void 0:t.itemIds.map((function(t,n){var c=jt.getEntity(a,{type:"item",id:t});return i.a.createElement(Ct,{key:t,index:n},i.a.createElement(wt,{name:null===c||void 0===c?void 0:c.name,moveUp:function(){return function(t){l(St.moveAttached("list",e,"itemIds",t,t-1))}(n)},moveDown:function(){return function(t){l(St.moveAttached("list",e,"itemIds",t,t+1))}(n)}}))}))));return i.a.createElement(R,{key:e,isRightShown:!0,body:n})}))));return i.a.createElement(N,{main:o,state:a})}function wt(e){var t=e.name,a=e.moveUp,n=e.moveDown,l=It();return i.a.createElement("div",{className:l.item},i.a.createElement(I.a,null,t),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(y.a,{onClick:a},i.a.createElement(ot.a,null))),i.a.createElement("div",null,i.a.createElement(y.a,{onClick:n},i.a.createElement(dt.a,null)))))}var Dt=a(164),At=Object(k.a)((function(e){return{card:{marginTop:e.spacing(2)},buttons:{display:"flex",justifyContent:"space-between"}}})),Tt=Object(g.b)({item:{}}),zt=Tt.reducer,Lt=Tt.actionCreators,Rt=Tt.selectors,Mt={entities:{item:{i1:{name:"Foo"},i2:{name:"Bar"},i3:{name:"Baz"}}},ids:{item:["i1","i2","i3"]}},Bt=st.b.div({flip:{transition:{duration:525}}});function Ft(){var e=Object(n.useReducer)(zt,Mt),t=Object(E.a)(e,2),a=t[0],l=t[1],c=Rt.getIds(a,{type:"item"}),r=At(),o=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Sort",summary:"Sort an entity collection",action:"sort",docElemId:"sort",example:"actionCreators.sort('item', (a, b) => (a.name > b.name ? 1 : -1))"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Click the buttons to sort by name. The ids will be sorted inside the ",i.a.createElement("code",null,"state.ids.item")," array."),i.a.createElement("div",{className:r.buttons},i.a.createElement(Dt.a,{onClick:function(){l(Lt.sort("item",(function(e,t){return e.name>t.name?1:-1})))}},"Sort by Name Asc"),i.a.createElement(Dt.a,{onClick:function(){l(Lt.sort("item",(function(e,t){return e.name<t.name?1:-1})))}},"Sort by Name Desc")),i.a.createElement(st.a,null,c.map((function(e,t){var n=Rt.getEntity(a,{type:"item",id:e});return i.a.createElement(Bt,{key:e,index:t},i.a.createElement("div",{className:r.card},i.a.createElement(R,{body:null===n||void 0===n?void 0:n.name,isSelectable:!1})))}))));return i.a.createElement(N,{main:o,state:a})}var Pt=Object(k.a)((function(e){return{buttons:{display:"flex",justifyContent:"space-between"},listTitle:{fontWeight:"bold"},item:{marginTop:e.spacing(2),background:"#fff",borderTop:"solid 1px #ccc",display:"flex"}}})),Yt={item:{listId:{type:"list",cardinality:g.a.ONE,reciprocal:"itemIds"}},list:{itemIds:{type:"item",cardinality:g.a.MANY,reciprocal:"listId"}}},Wt=Object(g.b)(Yt),Ht=Wt.selectors,Jt=Wt.reducer,Ut=Wt.actionCreators,Kt={entities:{list:{l1:{title:"List 1",itemIds:["i2","i3","i1"]},l2:{title:"List 2",itemIds:["i4","i6","i5"]}},item:{i1:{name:"Item 1",listId:"l1"},i2:{name:"Item 2",listId:"l1"},i3:{name:"Item 3",listId:"l1"},i4:{name:"Item 4",listId:"l2"},i5:{name:"Item 5",listId:"l2"},i6:{name:"Item 6",listId:"l2"}}},ids:{item:["i1","i2","i3","i4","i5","i6"],list:["l1","l2"]}},_t=st.b.div({flip:{transition:{duration:525}}});function qt(){var e=Object(n.useReducer)(Jt,Kt),t=Object(E.a)(e,2),a=t[0],l=t[1],c=Ht.getIds(a,{type:"list"}),r=Pt(),o=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Sort attached",summary:"Sort an attached entity collection",action:"sortAttached",docElemId:"sortAttached",example:"actionCreators.sortAttached('list', 'l1', 'itemIds', (a, b) => (a.name > b.name ? 1 : -1))"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Click the buttons to sort a list's items by name. The ids will be sorted inside the ",i.a.createElement("code",null,"itemIds")," array of the list inside ",i.a.createElement("code",null,"state.entities.list"),"."),i.a.createElement(M,null,c.map((function(e){var t=Ht.getEntity(a,{type:"list",id:e}),n=i.a.createElement("div",null,i.a.createElement(I.a,{className:r.listTitle},null===t||void 0===t?void 0:t.title),i.a.createElement("div",{className:r.buttons},i.a.createElement(Dt.a,{onClick:function(){return function(e){l(Ut.sortAttached("list",e,"itemIds",(function(e,t){return e.name>t.name?1:-1})))}(e)}},"Sort by Name Asc"),i.a.createElement(Dt.a,{onClick:function(){return function(e){l(Ut.sortAttached("list",e,"itemIds",(function(e,t){return e.name<t.name?1:-1})))}(e)}},"Sort by Name Desc")),i.a.createElement(st.a,null,null===t||void 0===t?void 0:t.itemIds.map((function(e,t){var n=Ht.getEntity(a,{type:"item",id:e});return i.a.createElement(_t,{key:e,index:t},i.a.createElement("div",{className:r.item},i.a.createElement(I.a,null,null===n||void 0===n?void 0:n.name)))}))));return i.a.createElement(R,{key:e,isRightShown:!0,body:n})}))));return i.a.createElement(N,{main:o,state:a})}var $t=Object(k.a)((function(e){return{buttons:{display:"flex",justifyContent:"space-between"},listTitle:{fontWeight:"bold"},item:{marginTop:e.spacing(2),background:"#fff",borderTop:"solid 1px #ccc",display:"flex"}}})),Gt={item:{listId:{type:"list",cardinality:g.a.ONE,reciprocal:"itemIds"}},list:{itemIds:{type:"item",cardinality:g.a.MANY,reciprocal:"listId"}}},Qt=Object(g.b)(Gt),Vt=Qt.selectors,Xt=Qt.emptyState,Zt=Qt.reducer,ea=Qt.actionCreators;function ta(){var e=Object(n.useReducer)(Zt,Xt),t=Object(E.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(1),r=Object(E.a)(c,2),o=r[0],m=r[1],d=Vt.getIds(a,{type:"list"}),s=$t(),u=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Batch",summary:"Run a batch of actions in a single reduction",action:"batch",docElemId:"batch",example:["actionCreators.batch(","  actionCreators.create('list', 'l1'),","  actionCreators.create('item', 'i1'),","  actionCreators.attach('list', 'l1', 'itemIds', 'i1'),",")"]}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Click the button to dispatch an action that contains multiple actions. Each one will create a list, three items, and then attach the items to the list."),i.a.createElement(Dt.a,{onClick:function(){var e=[q(),q(),q(),q()],t=e[0],a=e[1],n=e[2],i=e[3];l(ea.batch(ea.create("list",t,{title:"List ".concat(o)}),ea.create("item",a,{name:"Item ".concat(o,".1")}),ea.create("item",n,{name:"Item ".concat(o,".2")}),ea.create("item",i,{name:"Item ".concat(o,".3")}),ea.attach("list",t,"itemIds",a),ea.attach("list",t,"itemIds",n),ea.attach("list",t,"itemIds",i))),m(o+1)}},"Create List with Items"),i.a.createElement(M,null,d.map((function(e){var t=Vt.getEntity(a,{type:"list",id:e}),n=i.a.createElement("div",null,i.a.createElement(I.a,{className:s.listTitle},null===t||void 0===t?void 0:t.title),i.a.createElement("div",null,null===t||void 0===t?void 0:t.itemIds.map((function(e){var t=Vt.getEntity(a,{type:"item",id:e});return i.a.createElement("div",{key:e,className:s.item},i.a.createElement(I.a,null,null===t||void 0===t?void 0:t.name))}))));return i.a.createElement(R,{key:e,isRightShown:!0,body:n})}))));return i.a.createElement(N,{main:u,state:a})}var aa=Object(k.a)((function(e){return{buttons:{marginTop:e.spacing(2),display:"flex",justifyContent:"space-between"}}})),na={item:{listId:{type:"list",cardinality:g.a.ONE,reciprocal:"itemIds"}},list:{itemIds:{type:"item",cardinality:g.a.MANY,reciprocal:"listId"}}},ia=Object(g.b)(na),la=ia.reducer,ca=ia.emptyState,ra=ia.actionCreators,oa={entities:{list:{l1:{title:"List 1",itemIds:["i1","i2","i3"]},l2:{title:"List 2",itemIds:["i4","i5"]}},item:{i1:{name:"Item 1",listId:"l1"},i2:{name:"Item 2",listId:"l1"},i3:{name:"Item 3",listId:"l1"},i4:{name:"Item 4",listId:"l2"},i5:{name:"Item 5",listId:"l2"}}},ids:{item:["i1","i2","i3","i4","i5"],list:["l1","l2"]}};function ma(){var e=Object(n.useReducer)(la,ca),t=Object(E.a)(e,2),a=t[0],l=t[1],c=aa(),r=i.a.createElement(v.a,null,i.a.createElement(_,{title:"Set state",summary:"Set the normalized state",action:"setState",docElemId:"setState",example:"actionCreators.setState(myInitialState)"}),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Click the buttons to set/clear an entire object in the state."),i.a.createElement("div",{className:c.buttons},i.a.createElement(Dt.a,{onClick:function(){return l(ra.setState(oa))}},"Set State"),i.a.createElement(Dt.a,{onClick:function(){return l(ra.setState(ca))}},"Clear State")),i.a.createElement("div",null,i.a.createElement("pre",null,JSON.stringify(oa,null,2))));return i.a.createElement(N,{main:r,state:a})}var da=a(173),sa=a(73),ua=Object(k.a)((function(e){return{sourceLink:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},chip:{marginBottom:e.spacing(1),marginLeft:e.spacing(1),cursor:"grab"},demo:{marginTop:e.spacing(2)}}})),Ea=Object(g.b)({tag:{}}),pa=Ea.selectors,fa=Ea.actionCreators,ha=Ea.reducer,ba={entities:{tag:{t1:{value:"React"},t2:{value:"normalization"},t4:{value:"reducer"},t3:{value:"normalizr"},t5:{value:"Redux"},t6:{value:"relational data"}}},ids:{tag:["t1","t2","t3","t4","t5","t6"]}},ya=Object(sa.a)((function(e){return i.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.children)})),va=Object(sa.c)((function(e){return i.a.createElement("span",Object.assign({style:{cursor:"grab"}},e),e.children)})),Ia=Object(sa.b)((function(e){var t=ua();return i.a.createElement("div",null,i.a.createElement(da.a,Object.assign({},e,{className:t.chip})))}));function ga(){var e=Object(n.useReducer)(ha,ba),t=Object(E.a)(e,2),a=t[0],l=t[1],c=pa.getIds(a,{type:"tag"}),r=ua(),o=i.a.createElement("div",null,i.a.createElement(H,{title:"Sortable Tags",summary:"Setting up state for a sortable list is easy."}),i.a.createElement(W,null,"Setup:"),i.a.createElement(J,null,"const schema = {\n  tag: {}\n};\n\nconst { selectors, actionCreators, reducer } = makeNormalizedSlice(schema);"),i.a.createElement(I.a,{className:r.sourceLink},i.a.createElement(U,{url:"https://github.com/brietsparks/normalized-reducer-demo/blob/master/src/example-features/sortable-tags/SortableTags.tsx",text:"Source"})),i.a.createElement(W,null,"Demo:"),i.a.createElement(I.a,null,"Drag-and-drop the tasks to move (reorder) them, and click the x-icon to delete them."),i.a.createElement("div",{className:r.demo},i.a.createElement(ya,{axis:"xy",onSortStart:function(){document.body.style.cursor="grabbing"},onSortEnd:function(e){document.body.style.cursor="initial",l(fa.move("tag",e.oldIndex,e.newIndex))},useDragHandle:!0},c.map((function(e,t){var n=pa.getEntity(a,{type:"tag",id:e});return i.a.createElement(Ia,{key:e,index:t,label:i.a.createElement(va,null,null===n||void 0===n?void 0:n.value),onDelete:function(){return l(fa.delete("tag",e))}})})))));return i.a.createElement(N,{main:o,state:{ids:a.ids,entities:a.entities}})}var Oa=a(51),ja=a(56),xa=a(52),Sa=new Oa.b.Entity("users",{},{mergeStrategy:function(e,t){return Object(xa.a)({},e,{},t,{posts:[].concat(Object(ja.a)(e.posts||[]),Object(ja.a)(t.posts||[])),comments:[].concat(Object(ja.a)(e.comments||[]),Object(ja.a)(t.comments||[]))})},processStrategy:function(e,t,a){switch(a){case"author":return Object(xa.a)({},e,{posts:[t.id]});case"commenter":return Object(xa.a)({},e,{comments:[t.id]});default:return Object(xa.a)({},e)}}}),ka=new Oa.b.Entity("comments",{commenter:Sa},{processStrategy:function(e,t,a){return Object(xa.a)({},e,{post:t.id})}}),Ca=[new Oa.b.Entity("posts",{author:Sa,comments:[ka]})],Na=Object(k.a)((function(e){return{sourceLink:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},heading:{maxWidth:600,marginBottom:e.spacing(2)},scrollable:{height:"100vh",overflowY:"scroll"},state:{background:"rgb(39, 40, 34)"}}})),wa=[{id:"1",title:"My first post!",author:{id:"123",name:"Paul"},comments:[{id:"249",content:"Nice post!",commenter:{id:"245",name:"Jane"}},{id:"250",content:"Thanks!",commenter:{id:"123",name:"Paul"}}]},{id:"2",title:"This other post",author:{id:"123",name:"Paul"},comments:[{id:"251",content:"Your other post was nicer",commenter:{id:"245",name:"Jane"}},{id:"252",content:"I am a spammer!",commenter:{id:"246",name:"Spambot5000"}}]}];g.a.MANY,g.a.MANY,g.a.ONE,g.a.MANY,g.a.ONE,g.a.ONE;function Da(){var e=Object(Oa.a)(wa,Ca),t=Object(g.c)(e),a=Na();return i.a.createElement(O.a,{container:!0},i.a.createElement(O.a,{item:!0,sm:2},i.a.createElement("div",{className:a.scrollable},i.a.createElement(_n,null))),i.a.createElement(O.a,{item:!0,sm:10},i.a.createElement("div",{className:a.scrollable},i.a.createElement("div",{className:a.heading},i.a.createElement(H,{title:"Normalizr Integration"}),i.a.createElement(I.a,null,"Normalized-reducer integrates with normalizr via an adapter function that transforms data normalized from normalizr into state that can be fed into the reducer.")),i.a.createElement(I.a,{className:a.sourceLink},i.a.createElement(U,{url:"https://github.com/brietsparks/normalized-reducer-demo/blob/master/src/example-features/normalizr-integration/NormalizrIntegration.tsx",text:"Source"})),i.a.createElement(J,null,"const denormalizedData = {...}\nconst normalizedData: NormalizrOutput = normalize(denormalizedData, normalizrSchema);\nconst initialState = fromNormalizr(normalizedData);"),i.a.createElement("div",{className:a.state},i.a.createElement(O.a,{container:!0,spacing:0},i.a.createElement(O.a,{item:!0,sm:4},i.a.createElement("div",null,i.a.createElement(S,{state:wa,name:"denormalizedData",fullHeight:!1}))),i.a.createElement(O.a,{item:!0,sm:4},i.a.createElement("div",null,i.a.createElement(S,{state:e,name:"normalizedData",fullHeight:!1}))),i.a.createElement(O.a,{item:!0,sm:4},i.a.createElement("div",null,i.a.createElement(S,{state:t,fullHeight:!1}))))))))}var Aa=a(49),Ta=a(22),za=a(88),La=a.n(za),Ra=a(72),Ma=a.n(Ra),Ba=Object(k.a)((function(e){return{sourceLink:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},comment:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{display:"flex",overflow:"hidden",marginBottom:t.isLast?void 0:e.spacing(2)}},commentSideline:{position:"relative",top:11},commentContent:{paddingLeft:e.spacing(2),borderTop:"solid 1px #ccc",borderLeft:"solid 1px #ccc",width:"100%"},reply:{paddingLeft:e.spacing(2),borderLeft:"solid 1px #ccc"},replyCancel:{marginRight:e.spacing(1)}}})),Fa={comment:{parentId:{type:"comment",cardinality:g.a.ONE,reciprocal:"childIds"},childIds:{type:"comment",cardinality:g.a.MANY,reciprocal:"parentId"}}},Pa=Object(g.b)(Fa),Ya=(Pa.emptyState,Pa.actionCreators),Wa=Pa.reducer,Ha=Pa.selectors,Ja=(Pa.actionTypes,Object(Aa.b)(Wa,{entities:{comment:{c1:{childIds:["c1.1"],value:"Boboddy - what does the first b stand for?"},"c1.1":{parentId:"c1",value:"Biznus!"},c2:{childIds:["c2.1"],value:"Maybe there is some sort of animal we can make a sacrifice to - like a giant buffalo."},"c2.1":{parentId:"c2",childIds:["c2.1.1"],value:"Or some sort of monster like something with the body of a walrus with the head of a sea lion."},"c2.1.1":{parentId:"c2.1",childIds:["c2.1.1.1"],value:"Or something with the body of an egret with the head of a meerkat."},"c2.1.1.1":{parentId:"c2.1.1",value:"Or just the head of a monkey with the antlers of a reindeer...with the body of a porcupine."}}},ids:{comment:["c1","c2","c1.1","c2.1","c2.1.1","c2.1.1.1"]}}));function Ua(){return i.a.createElement(Ta.a,{store:Ja},i.a.createElement(Ka,null))}function Ka(){var e=Object(Ta.c)((function(e){return function(e){return Ha.getIds(e,{type:"comment"}).filter((function(t){var a=Ha.getEntity(e,{type:"comment",id:t});return!!a&&!a.parentId}))}(e)})),t=Object(Ta.c)((function(e){return e})),a=Object(Ta.b)(),n=Ba(),l=i.a.createElement("div",null,i.a.createElement(H,{title:"Comment Tree",summary:"An example of a tree structure use-case, where deletion will cascade to all descendants."}),i.a.createElement(W,null,"Setup:"),i.a.createElement(J,null,"const schema: Schema = {\n  comment: {\n    parentId: {\n      type: 'comment',\n      cardinality: Cardinalities.ONE,\n      reciprocal: 'childIds'\n    },\n    childIds: {\n      type: 'comment',\n      cardinality: Cardinalities.MANY,\n      reciprocal: 'parentId'\n    }\n  }\n};\n\nexport const {\n  emptyState,\n  actionCreators,\n  reducer,\n  selectors,\n} = normalizedSlice(schema);\n"),i.a.createElement(I.a,{className:n.sourceLink},i.a.createElement(U,{url:"https://github.com/brietsparks/normalized-reducer-demo/blob/master/src/example-features/comment-tree/CommentTree.tsx",text:"Source"})),i.a.createElement(W,null,"Demo:"),i.a.createElement("div",null,i.a.createElement("div",null,e.map((function(e){return i.a.createElement(qa,{key:e,id:e})}))),i.a.createElement($a,{onSubmit:function(e){var t=q();a(Ya.create("comment",t,{value:e}))},label:"Comment"})));return i.a.createElement(N,{main:l,state:t})}var _a=function e(){return{childIds:e}};function qa(e){var t,a=e.id,l=e.isLast,c=Object(Ta.c)((function(e){return Ha.getEntity(e,{type:"comment",id:a})})),r=Object(n.useState)(!1),o=Object(E.a)(r,2),m=o[0],d=o[1],s=function(){return d(!1)},u=Object(n.useState)(!1),p=Object(E.a)(u,2),f=p[0],h=p[1],b=function(){return h(!1)},v=Object(Ta.b)(),g=Ba({isLast:l});if(!c)return null;return i.a.createElement("div",{className:g.comment},c.childIds&&i.a.createElement("div",{className:g.commentSideline}),i.a.createElement("div",{className:g.commentContent},i.a.createElement(I.a,null,c.value),!m&&i.a.createElement(y.a,{onClick:function(){return d(!0)}},i.a.createElement(Ma.a,{fontSize:"small"})),m&&!f&&i.a.createElement(de.a,{onClickAway:s},i.a.createElement("div",null,i.a.createElement(y.a,{onClick:function(){return h(!0)}},i.a.createElement(La.a,{fontSize:"small"})),i.a.createElement(y.a,{onClick:function(){return v(Ya.delete("comment",a,_a))}},i.a.createElement(Ue.a,{fontSize:"small"})))),f&&i.a.createElement("div",{className:g.reply},i.a.createElement($a,{autoFocus:!0,onSubmit:function(e){if(e){var t=q();v(Ya.batch(Ya.create("comment",t,{value:e}),Ya.attach("comment",t,"parentId",a,{reciprocalIndex:0}))),b(),s()}},onCancel:function(){b()},showCancel:!0,label:"Reply"})),null===(t=c.childIds)||void 0===t?void 0:t.map((function(e,t){var a;return i.a.createElement(qa,{key:e,id:e,isLast:t>=((null===(a=c.childIds)||void 0===a?void 0:a.length)||0)-1})}))))}function $a(e){var t=e.onSubmit,a=e.onCancel,l=e.showCancel,c=e.label,r=e.autoFocus,o=Ba(),m=Object(n.useState)(""),d=Object(E.a)(m,2),s=d[0],u=d[1];return i.a.createElement("div",null,i.a.createElement(p.a,{autoFocus:r,fullWidth:!0,placeholder:"What are your thoughts?",onChange:function(e){return u(e.target.value)},value:s}),i.a.createElement("div",null,l&&i.a.createElement(Dt.a,{variant:"text",className:o.replyCancel,onClick:function(){a&&a(),u("")}},"Cancel"),i.a.createElement(Dt.a,{color:"primary",onClick:function(){var e=s.trim();e&&(t(e),u(""))}},c)))}var Ga=a(89),Qa=a.n(Ga),Va=a(90),Xa=a.n(Va),Za=a(93),en=a.n(Za),tn=a(91),an=a.n(tn),nn=a(92),ln=a.n(nn),cn=a(94),rn=a.n(cn),on=Object(k.a)((function(e){return{sourceLink:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},nodeLine:{display:"flex"},nodeChildren:{paddingLeft:e.spacing(3)},options:{display:"flex"}}})),mn=(a(115),Object(g.b)({directory:{parentDirectoryId:{type:"directory",cardinality:"one",reciprocal:"childDirectoryIds"},childDirectoryIds:{type:"directory",cardinality:"many",reciprocal:"parentDirectoryId"},fileIds:{type:"file",cardinality:"many",reciprocal:"directoryId"}},file:{directoryId:{type:"directory",cardinality:"one",reciprocal:"fileIds"}}})),dn=(mn.emptyState,mn.actionCreators),sn=mn.reducer,un=mn.selectors,En=(mn.actionTypes,Object(Aa.b)(sn,{entities:{directory:{d1:{id:"d1",name:"Directory 1",childDirectoryIds:["d1.1"],fileIds:["f1"]},"d1.1":{id:"d1.1",name:"Directory 1.1",parentDirectoryId:"d1",childDirectoryIds:["d1.1.1"],fileIds:["f2","f3"]},"d1.1.1":{id:"d1.1",name:"Directory 1.1.1",parentDirectoryId:"d1.1",childDirectoryIds:[],fileIds:["f4"]},g2:{id:"d1",name:"Directory 2",childDirectoryIds:[],fileIds:["f5"]}},file:{f1:{id:"f1",name:"File 1",directoryId:"d1"},f2:{id:"f2",name:"File 2",directoryId:"d1.1"},f3:{id:"f3",name:"File 3",directoryId:"d1.1"},f4:{id:"f4",name:"File 4",directoryId:"d1.1.1"},f5:{id:"f5",name:"File 5",directoryId:"g2"}}},ids:{directory:["d1","d1.1","d1.1.1","g2"],file:["f1","f2","f3","f4","f5"]}}));function pn(){return i.a.createElement(Ta.a,{store:En},i.a.createElement(fn,null))}function fn(){var e=Object(Ta.c)((function(e){return function(e){return un.getIds(e,{type:"directory"}).filter((function(t){var a=un.getEntity(e,{type:"directory",id:t});return!!a&&!a.parentDirectoryId}))}(e)})),t=Object(Ta.c)((function(e){return e})),a=Object(Ta.b)(),n=on(),l=i.a.createElement("div",null,i.a.createElement(H,{title:"Directory Tree",summary:"An a composite-tree structure use-case, where deletion will cascade to all descendants."}),i.a.createElement(W,null,"Setup:"),i.a.createElement(J,null,"const schema = {\n  directory: {\n    parentDirectoryId: {\n      type: 'directory', cardinality: 'one', reciprocal: 'childDirectoryIds'\n    },\n    childDirectoryIds: {\n      type: 'directory', cardinality: 'many', reciprocal: 'parentDirectoryId'\n    },\n    fileIds: {\n      type: 'file', cardinality: 'many', reciprocal: 'directoryId'\n    }\n  },\n  file: {\n    directoryId: {\n      type: 'directory', cardinality: 'one', reciprocal: 'fileIds'\n    }\n  }\n};\n\nexport const {\n  emptyState,\n  actionCreators,\n  reducer,\n  selectors,\n} = normalizedSlice(schema);\n"),i.a.createElement(I.a,{className:n.sourceLink},i.a.createElement(U,{url:"https://github.com/brietsparks/normalized-reducer-demo/blob/master/src/example-features/directory-tree/DirectoryTree.tsx",text:"Source"})),i.a.createElement(W,null,"Demo:"),i.a.createElement("div",null,e.map((function(e){return i.a.createElement(bn,{key:e,id:e})})),i.a.createElement(vn,{onSubmit:function(e){var t=q();a(dn.create("directory",t,{name:e}))},placeholder:"New Top Level Folder"})));return i.a.createElement(N,{main:l,state:t})}var hn=function e(){return{childDirectoryIds:e,fileIds:{}}};function bn(e){var t,a,l=e.id,c=Object(Ta.c)((function(e){return un.getEntity(e,{type:"directory",id:l})})),r=Object(n.useState)(!(null===c||void 0===c?void 0:c.parentDirectoryId)),o=Object(E.a)(r,2),m=o[0],d=o[1],s=Object(n.useState)(!1),u=Object(E.a)(s,2),p=u[0],f=u[1],h=Object(n.useState)(!1),b=Object(E.a)(h,2),v=b[0],g=b[1],O=Object(n.useState)(!1),j=Object(E.a)(O,2),x=j[0],S=j[1],k=function(){g(!1),S(!1),f(!1)},C=Object(Ta.b)(),N=on();return c?i.a.createElement("div",null,i.a.createElement("div",{className:N.nodeLine},!m&&i.a.createElement(y.a,{onClick:function(){return d(!0)}},i.a.createElement(Qa.a,null)),m&&i.a.createElement(y.a,{onClick:function(){return d(!1)}},i.a.createElement(Xa.a,null)),i.a.createElement(I.a,null,c.name)),m&&i.a.createElement("div",{className:N.nodeChildren},i.a.createElement("div",{className:N.options},i.a.createElement("span",null,i.a.createElement(y.a,{onClick:function(){return f(!0)}},i.a.createElement(Ma.a,null))),(p||x||v)&&i.a.createElement(de.a,{onClickAway:k},i.a.createElement("div",null,p&&i.a.createElement("span",null,i.a.createElement(y.a,{onClick:function(){S(!0),g(!1),f(!1)}},i.a.createElement(an.a,null)),i.a.createElement(y.a,{onClick:function(){g(!0),S(!1),f(!1)}},i.a.createElement(ln.a,null)),i.a.createElement(y.a,{onClick:function(){C(dn.delete("directory",l,hn))}},i.a.createElement(Ue.a,null))),x&&i.a.createElement(vn,{onSubmit:function(e){var t=q();C(dn.batch(dn.create("directory",t,{name:e}),dn.attach("directory",t,"parentDirectoryId",l))),k()},placeholder:"New Folder:",autoFocus:!0}),v&&i.a.createElement(vn,{onSubmit:function(e){var t=q();C(dn.batch(dn.create("file",t,{name:e}),dn.attach("file",t,"directoryId",l))),k()},placeholder:"New File:",autoFocus:!0})))),i.a.createElement("div",null,null===(t=c.fileIds)||void 0===t?void 0:t.map((function(e){return i.a.createElement(yn,{key:e,id:e})}))),i.a.createElement("div",null,null===(a=c.childDirectoryIds)||void 0===a?void 0:a.map((function(e){return i.a.createElement(bn,{key:e,id:e})}))))):null}function yn(e){var t=e.id,a=Object(Ta.c)((function(e){return un.getEntity(e,{type:"file",id:t})})),n=on();return a?i.a.createElement("div",{className:"".concat(n.nodeLine," directory-file")},i.a.createElement(en.a,null),i.a.createElement(I.a,null,a.name)):null}function vn(e){var t=e.onSubmit,a=e.placeholder,l=e.autoFocus,c=Object(n.useState)(""),r=Object(E.a)(c,2),o=r[0],m=r[1],d=o.trim();return i.a.createElement("div",null,i.a.createElement(p.a,{autoFocus:l,value:o,onChange:function(e){return m(e.target.value)},placeholder:a,InputProps:{endAdornment:i.a.createElement(b.a,{position:"end"},i.a.createElement(y.a,{onClick:function(){d&&(t(d),m(""))},color:"primary",disabled:!d},i.a.createElement(rn.a,null)))}}))}var In="/demo/create",gn="/demo/create-indexed",On="/demo/update",jn="/demo/move",xn="/demo/delete-basic",Sn="/demo/attach-detach-one-to-many",kn="/demo/attach-detach-many-to-many",Cn="/demo/attach-detach-one-to-one",Nn="/demo/move-attached",wn="/demo/delete-and-detach",Dn="/demo/sort",An="/demo/sort-attached",Tn="/demo/batch",zn="/demo/set-state",Ln="/examples/sortable-tags",Rn="/examples/comment-tree",Mn="/examples/directory-tree",Bn="/examples/normalizr-integration";function Fn(){return i.a.createElement(s.a,{basename:"normalized-reducer-demo"},i.a.createElement(u.a,{exact:!0,path:"/"},i.a.createElement(oe,null)),i.a.createElement(u.a,{exact:!0,path:In},i.a.createElement(oe,null)),i.a.createElement(u.a,{exact:!0,path:gn},i.a.createElement(me,null)),i.a.createElement(u.a,{exact:!0,path:On},i.a.createElement(He,null)),i.a.createElement(u.a,{exact:!0,path:jn},i.a.createElement(vt,null)),i.a.createElement(u.a,{exact:!0,path:xn},i.a.createElement(lt,null)),i.a.createElement(u.a,{exact:!0,path:Sn},i.a.createElement(Me,null)),i.a.createElement(u.a,{exact:!0,path:kn},i.a.createElement(Le,null)),i.a.createElement(u.a,{exact:!0,path:Cn},i.a.createElement(Re,null)),i.a.createElement(u.a,{exact:!0,path:Nn},i.a.createElement(Nt,null)),i.a.createElement(u.a,{exact:!0,path:wn},i.a.createElement(ct,null)),i.a.createElement(u.a,{exact:!0,path:Dn},i.a.createElement(Ft,null)),i.a.createElement(u.a,{exact:!0,path:An},i.a.createElement(qt,null)),i.a.createElement(u.a,{exact:!0,path:Tn},i.a.createElement(ta,null)),i.a.createElement(u.a,{exact:!0,path:zn},i.a.createElement(ma,null)),i.a.createElement(u.a,{exact:!0,path:Ln},i.a.createElement(ga,null)),i.a.createElement(u.a,{exact:!0,path:Rn},i.a.createElement(Ua,null)),i.a.createElement(u.a,{exact:!0,path:Mn},i.a.createElement(pn,null)),i.a.createElement(u.a,{exact:!0,path:Bn},i.a.createElement(Da,null)))}var Pn=a(160),Yn=a(165),Wn=a(166),Hn=a(168),Jn=a(167),Un=a(96),Kn=a.n(Un);a(117);function _n(){return i.a.createElement(Pn.a,{dense:!0,component:"nav",className:"nav-links"},i.a.createElement(Yn.a,null,i.a.createElement(Wn.a,null,i.a.createElement("a",{href:"https://github.com/brietsparks/normalized-reducer",target:"_blank",rel:"noopener noreferrer"},i.a.createElement(Kn.a,null)," Normalized Reducer"))),i.a.createElement(Jn.a,null),i.a.createElement(Pn.a,{dense:!0,component:"div",subheader:i.a.createElement(Hn.a,{component:"div"},"Actions Demo")},i.a.createElement(s.b,{to:In},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Create"))),i.a.createElement(s.b,{to:gn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Create, indexed"))),i.a.createElement(s.b,{to:On},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Update"))),i.a.createElement(s.b,{to:jn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Move"))),i.a.createElement(s.b,{to:xn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Delete"))),i.a.createElement(s.b,{to:Sn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Attach/detach, one-to-many"))),i.a.createElement(s.b,{to:kn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Attach/detach, many-to-many"))),i.a.createElement(s.b,{to:Cn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Attach/detach, one-to-one"))),i.a.createElement(s.b,{to:Nn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Move attached"))),i.a.createElement(s.b,{to:wn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Delete + detach"))),i.a.createElement(s.b,{to:Dn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Sort"))),i.a.createElement(s.b,{to:An},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Sort attached"))),i.a.createElement(s.b,{to:Tn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Batch"))),i.a.createElement(s.b,{to:zn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Set state"))),i.a.createElement(Jn.a,null)),i.a.createElement(Pn.a,{dense:!0,component:"div",subheader:i.a.createElement(Hn.a,{component:"div"},"Example Uses")},i.a.createElement(s.b,{to:Ln},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Sortable tags list"))),i.a.createElement(s.b,{to:Rn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Comment tree"))),i.a.createElement(s.b,{to:Mn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Directory tree (composite tree)"))),i.a.createElement(s.b,{to:Bn},i.a.createElement(Yn.a,{button:!0},i.a.createElement(Wn.a,null,"Normalizr Integration")))))}var qn=function(){return i.a.createElement(r.a,{theme:d},i.a.createElement(o.a,null),i.a.createElement(Fn,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(qn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[105,1,2]]]);
//# sourceMappingURL=main.956874d6.chunk.js.map